language: python
env:
  global:
  - secure: DRUP/7WCSPj7o73WF9dsmUCU+K+F1mVsq8XkDOHMvTkR82rjYNqIZqs5CWQHvJ1CT1YDVMXTAAdTOnuozH8BfyYGH7dP5LcbGuUtcYqKwVmHTX0eERHUpDYo5XxJdSG4C20MaqnDvhHZonM573JhJzKLTlVEEbrF8e42MniEzKw=
install:
- pip install -e .
- pip install -r dev_requirements.txt
script:
- py.test --cov syncloud.owncloud
deploy:
  provider: pypi
  user: syncloud-build
  password:
    secure: jHE98B5Asprq16ly3hQl/0moVSdwwzrEj5lvo3VuzLynMPN34DZ2NxIVzlk0kVibWlmRMSHVz9OXu617CAM2zdBNsEc50JobB3pTFv7Weh/jUUvTVX4fadP/Py4NntmwKx5derb/NkVmSMC2p38ymQQEoqHfZuDwZDF0SDSkhIw=
after_deploy:
- pip install travis-tools
- universal-version-push version syncloud/image syncloud-build GH_TOKEN master "Travis build"
- version-increment version
- universal-version-push version ${TRAVIS_REPO_SLUG} syncloud-build GH_TOKEN ${TRAVIS_BRANCH} "Travis build [skip ci]"
